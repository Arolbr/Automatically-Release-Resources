# MemoryGuard-Lite (内存监控优化助手)

一个基于 C++ 和 Windows API 开发的轻量级系统后台工具。当系统内存占用过高时，它会自动识别并优化非核心进程，通过压缩工作集和调整调度优先级，确保系统运行的流畅度。

---

## 功能特性

* **实时内存监控**：后台线程每秒轮询系统内存水位。
* **自动化策略**：当内存占用超过 **85%** 时，自动触发系统级优化。
* **智能进程识别**：
    * **白名单保护**：自动避开 `System`、`Explorer` 等系统核心组件。
    * **用户进程定位**：精准锁定占用资源较高的第三方应用程序。
* **双重优化机制**：
    * **内存清理**：调用 `EmptyWorkingSet` 强制释放进程冗余内存页。
    * **资源降权**：将高占用进程设为 `BELOW_NORMAL` 优先级，保障前台任务流畅。
* **静默交互**：
    * 无主窗口运行，完全通过系统托盘图标管理。
    * **气泡通知防抖**：设置 5 分钟通知冷却时间，避免频繁弹窗。

---

## 技术栈

* **核心语言**：C++ (MSVC 编译器)
* **Windows SDK 核心接口**：
    * `PSAPI` (Process Status API)：进程枚举与内存清理。
    * `ShellAPI`：系统托盘图标与气泡通知映射。
    * `TlHelp32`：快照方式检索系统进程树。
* **并发模型**：`std::thread` 后台异步监控，不阻塞 UI 消息循环。

---

## 项目结构与核心逻辑

本项目摒弃了复杂的框架限制，直接与底层 API 通信。

### 优化流程图
1. **监测**：`GlobalMemoryStatusEx` 获取全局负载。
2. **扫描**：`EnumProcesses` 检索当前活动进程 PID。
3. **过滤**：`IsUserProcess` 校验进程安全属性。
4. **执行**：`OptimizeProcess` 调用内存压缩指令。

---

## 编译与运行

由于本项目涉及 Windows 底层 API，建议在以下环境编译：

### 环境要求
* **IDE**: Visual Studio 2019 / 2022 (及以上版本)
* **字符集**: Unicode Character Set (必须)
* **依赖库**: `psapi.lib`, `shell32.lib` (已在源码中通过 #pragma 自动引入)
* **C++语言标准**: C++17及以上 (发行版中使用的是C++20)

### 构建步骤
1.  克隆仓库或下载源码。
2.  使用 Visual Studio 打开项目。
3.  选择 `Release` 配置以获得最佳性能（生成文件仅约 50KB）。
4.  运行生成的 `.exe` 文件。

> **注意**：为了能清理其他进程的内存，建议以 **管理员权限** 运行本程序。

---

